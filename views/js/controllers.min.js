define("wfEngine/controller/routes",[],function(){return{}}),define("iframeNotifier",["jquery"],function(){function e(e){return!(!window.__knownParent__||!e||e===window)}var t={parent:function(t,n){if(e(window.parent)&&window.parent.$){var i=window.parent.$;i(window.parent.document).trigger(t,n||[])}},top:function(t,n){if(e(window.top)&&window.top.$){var i=window.top.$;i(window.top.document).trigger(t,n||[])}}};return t}),define("jquery.sizechange",["jquery"],function(e){function t(){return window.MutationObserver||window.WebKitMutationObserver||!1}function n(){var e=document.createElement("p"),t=!1;if(e.addEventListener)e.addEventListener("DOMAttrModified",function(){t=!0},!1);else{if(!e.attachEvent)return!1;e.attachEvent("onDOMAttrModified",function(){t=!0})}return e.setAttribute("id","__dummy_domtest_target"),t}e.fn.sizeChange=function(i){var o=this,r=!1;if(i=i||e.noop(),0===o.length)return o;var c=function(){r===!1&&(r=!0,setTimeout(function(){i(),r=!1},1)),o.find("img").one("load",function(){i()})};if(t()){var a=window.MutationObserver||window.WebKitMutationObserver,u={subtree:"IFRAME"!==this[0].nodeName,attributes:!0},f=new a(function(e){for(var t in e)(null!==e[t].addedNodes||null!==e[t].attributeName)&&c()});o.each(function(){f.observe(this,u)})}else{if(!n())throw new Error("Event listening not supported");o.on("DOMAttrModified",function(e){"style"===e.attrName&&c()}),o.on("DOMNodeRemoved DOMNodeInserted DOMNodeInsertedIntoDocument DOMNodeRemovedFromDocument",function(e){1===e.target.nodeType&&c()})}return this}}),define("iframeResizer",["jquery","iframeNotifier","jquery.sizechange"],function(e,t){var n={autoHeight:function(t,n,i){var o=this;return n=n||"body",i=i||0,t.on("load",function(){var r=t.contents(),c=r.height(),a=!1,u=function(){a===!1&&(a=!0,setTimeout(function(){o._adaptHeight(t,c,i),a=!1},1))};o._adaptHeight(t,c);try{e(r[0].document).find("img"),r.find(n).sizeChange(function(){var e=r.height();e>c&&(c=e,u()),e>c&&(c=e,u())})}catch(f){setInterval(function(){var e=r.height();e>c&&(c=e,u())},10)}}),t},eventHeight:function(t,n){var i=this;(!n||parseInt(n,10)<10)&&(n=10),t.on("load.eventHeight",function(){var e=parseInt(t.contents().height(),10)-parseInt(t.height(),10);e>n&&(n=e),i._adaptHeight(t,t.contents().height()+n)}),e(document).on("heightchange",function(e,o,r){r=r||0,i._adaptHeight(t,o+r+n)})},_notifyParent:function(e,n){t.parent("heightchange",[e,n||0])},_adaptHeight:function(e,t,n){e.height(t),this._notifyParent(t,n)}};return n}),define("wfEngine/WfRunner",["jquery","iframeResizer","iframeNotifier"],function(e,t,n){function i(e,t,n){this.activityExecutionUri=e,this.processUri=t,this.nonce=n,this.services=[],this.processBrowserModule=window.location.href.replace(/^(.*\/)[^/]*/,"$1")}return i.prototype.initService=function(i,o){var r=this;this.services.push(i),i.onFinish(function(){return r.forward()}),t.eventHeight(o,parseInt(e("#navigation").height(),10)),i.loadInto(o.get(0),function(){n.parent("unloading")})},i.prototype.forward=function(){var e=this.processBrowserModule+"next"+"?processUri="+encodeURIComponent(this.processUri)+"&activityUri="+encodeURIComponent(this.activityExecutionUri)+"&nc="+encodeURIComponent(this.nonce);i.move(e)},i.prototype.backward=function(){var e=this.processBrowserModule+"back"+"?processUri="+encodeURIComponent(this.processUri)+"&activityUri="+encodeURIComponent(this.activityExecutionUri)+"&nc="+encodeURIComponent(this.nonce);i.move(e,!0)},i.move=function(t,i){e("#tools").empty().height("300px"),e("#navigation").hide(),n.parent("loading",[i]),window.location.href=t},i}),define("wfEngine/controller/processBrowser",["jquery","lodash","wfEngine/WfRunner"],function(e,t,n){return{start:function(i){function o(){r.off("click").attr("active",!1),c.off("click").attr("active",!1)}var r=e("#back"),c=e("#next"),a=new n(i.activityExecutionUri,i.processUri,i.activityExecutionNonce);t.forEach(i.services,function(t){a.initService(t.api,e("#"+t.frameId),t.style)}),r.click(function(e){e.preventDefault(),o(),a.backward()}),c.click(function(e){e.preventDefault(),o(),a.forward()}),e("#debug").click(function(){e("#debugWindow").toggle("slow")})}}});