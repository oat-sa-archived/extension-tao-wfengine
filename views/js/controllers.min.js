define("wfEngine/controller/routes",[],function(){return{}}),define("wfEngine/WfRunner",["jquery","iframeResizer","iframeNotifier"],function($,iframeResizer,iframeNotifier){function WfRunner(activityExecutionUri,processUri,activityExecutionNonce){this.activityExecutionUri=activityExecutionUri,this.processUri=processUri,this.nonce=activityExecutionNonce,this.childServiceApi=null,this.services=[],this.processBrowserModule=window.location.href.replace(/^(.*\/)[^/]*/,"$1")}return WfRunner.prototype.initService=function(serviceApi,$serviceFrame){var self=this;this.childServiceApi=serviceApi,this.services.push(serviceApi),serviceApi.onFinish(function(){return self.forward()
}),iframeResizer.eventHeight($serviceFrame,parseInt($("#navigation").height(),10)),serviceApi.loadInto($serviceFrame.get(0),function(){iframeNotifier.parent("unloading")})},WfRunner.prototype.forward=function(){var that=this;this.childServiceApi.kill(function(){var url=that.processBrowserModule+"next?processUri="+encodeURIComponent(that.processUri)+"&activityUri="+encodeURIComponent(that.activityExecutionUri)+"&nc="+encodeURIComponent(that.nonce);WfRunner.move(url)})},WfRunner.prototype.backward=function(){var that=this;this.childServiceApi.kill(function(){var url=that.processBrowserModule+"back?processUri="+encodeURIComponent(that.processUri)+"&activityUri="+encodeURIComponent(that.activityExecutionUri)+"&nc="+encodeURIComponent(that.nonce);
WfRunner.move(url,!0)})},WfRunner.move=function(url,back){$("#tools").empty().height("300px"),$("#navigation").hide(),iframeNotifier.parent("loading",[back]),window.location.href=url},WfRunner}),define("wfEngine/controller/processBrowser",["jquery","lodash","wfEngine/WfRunner"],function($,_,WfRunner){return{start:function(options){function deactivateControls(){$back.off("click").attr("active",!1),$next.off("click").attr("active",!1)}var $back=$("#back"),$next=$("#next"),wfRunner=new WfRunner(options.activityExecutionUri,options.processUri,options.activityExecutionNonce);_.forEach(options.services,function(service){wfRunner.initService(service.api,$("#"+service.frameId),service.style)
}),$back.click(function(e){e.preventDefault(),deactivateControls(),wfRunner.backward()}),$next.click(function(e){e.preventDefault(),deactivateControls(),wfRunner.forward()}),$("#debug").click(function(){$("#debugWindow").toggle("slow")})}}});
//# sourceMappingURL=routes.js.map